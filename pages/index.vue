<script setup lang="ts">
const todayAnime = await useAnimeSchedule()
const userTimeZone = Intl.DateTimeFormat().resolvedOptions().timeZone

const formatToLocal = (isoDate: string | null) => {
  if (!isoDate) return '‚Äî'
  const date = new Date(isoDate)
  return date.toLocaleString('ru-RU', {
    dateStyle: 'medium',
    timeStyle: 'short',
    timeZone: userTimeZone,
  })
}
</script>

<template>
  <div>
    <h1 class="text-xl font-bold">üé• –û–Ω–≥–æ–∏–Ω–≥–∏ –Ω–∞ —Å–µ–≥–æ–¥–Ω—è</h1>
    <ul>
      <li v-for="anime in todayAnime" :key="anime.id">
        <strong>{{ anime.russian }}</strong> ‚Äî —Å–ª–µ–¥—É—é—â–∞—è —Å–µ—Ä–∏—è:
        {{ formatToLocal(anime.nextEpisodeAt) }}
      </li>
    </ul>
  </div>

</template>
